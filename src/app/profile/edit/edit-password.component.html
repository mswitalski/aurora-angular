<h2 translate>HEADER.EDIT-PASSWORD</h2>

<form [formGroup]="editPasswordForm" (ngSubmit)="submitForm()">
    <fieldset [disabled]="isSubmitting">
        <fieldset class="form-group row">
            <label for="current-password" class="col-md-2 col-form-label" translate>USER.CURRENT-PASSWORD</label>
            <div class="col-md-5">
                <input
                    id="current-password"
                    class="form-control"
                    formControlName="current-password"
                    [(ngModel)]="formData.currentPassword"
                    placeholder="{{ 'USER.CURRENT-PASSWORD' | translate }}"
                    type="password"/>
                <div
                    *ngIf="editPasswordForm.controls['current-password'].errors && !editPasswordForm.controls['current-password'].pristine"
                    class="text-danger">
                    <div [hidden]="!editPasswordForm.controls['current-password'].errors.required" translate>
                        ERROR.REQUIRED
                    </div>
                    <div [hidden]="!editPasswordForm.controls['current-password'].errors.minlength" translate
                         [translateParams]="{value: 3}">ERROR.MIN-LEN
                    </div>
                    <div [hidden]="!editPasswordForm.controls['current-password'].errors.maxlength" translate
                         [translateParams]="{value: 60}">ERROR.MAX-LEN
                    </div>
                </div>
            </div>
        </fieldset>
        <div formGroupName="new-passwords">
            <fieldset class="form-group row">
                <label for="new-password" class="col-md-2 col-form-label" translate>USER.NEW-PASSWORD</label>
                <div class="col-md-5">
                    <input
                        id="new-password"
                        class="form-control"
                        formControlName="new"
                        [(ngModel)]="formData.newPassword"
                        placeholder="{{ 'USER.NEW-PASSWORD' | translate }}"
                        type="password"/>
                    <div
                        *ngIf="editPasswordForm.controls['new-passwords'].controls['new'].errors && !editPasswordForm.controls['new-passwords'].controls['new'].pristine"
                        class="text-danger">
                        <div [hidden]="!editPasswordForm.controls['new-passwords'].controls['new'].errors.required"
                             translate>ERROR.REQUIRED
                        </div>
                        <div [hidden]="!editPasswordForm.controls['new-passwords'].controls['new'].errors.minlength"
                             translate
                             [translateParams]="{value: 3}">ERROR.MIN-LEN
                        </div>
                        <div [hidden]="!editPasswordForm.controls['new-passwords'].controls['new'].errors.maxlength"
                             translate
                             [translateParams]="{value: 60}">ERROR.MAX-LEN
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset class="form-group row">
                <label for="new-password-repeated" class="col-md-2 col-form-label"
                       translate>USER.NEW-PASSWORD-REPEATED</label>
                <div class="col-md-5">
                    <input
                        id="new-password-repeated"
                        class="form-control"
                        formControlName="repeated"
                        [(ngModel)]="formData.newPasswordRepeated"
                        placeholder="{{ 'USER.NEW-PASSWORD-REPEATED' | translate }}"
                        type="password"/>
                    <div
                        *ngIf="editPasswordForm.controls['new-passwords'].controls['repeated'].errors && !editPasswordForm.controls['new-passwords'].controls['repeated'].pristine"
                        class="text-danger">
                        <div [hidden]="!editPasswordForm.controls['new-passwords'].controls['repeated'].errors.required"
                             translate>ERROR.REQUIRED
                        </div>
                        <div
                            [hidden]="!editPasswordForm.controls['new-passwords'].controls['repeated'].errors.minlength"
                            translate
                            [translateParams]="{value: 3}">ERROR.MIN-LEN
                        </div>
                        <div
                            [hidden]="!editPasswordForm.controls['new-passwords'].controls['repeated'].errors.maxlength"
                            translate
                            [translateParams]="{value: 60}">ERROR.MAX-LEN
                        </div>
                    </div>
                    <div
                        *ngIf="editPasswordForm.hasError('notSame', 'new-passwords') && !editPasswordForm.controls['new-passwords'].controls['repeated'].pristine && !isSubmitting"
                        class="text-danger" translate>
                        ERROR.INVALID-REPEATED-PASSWORD
                    </div>
                </div>
            </fieldset>
        </div>

        <app-list-errors [errors]="validationErrors"></app-list-errors>

        <button [disabled]="!editPasswordForm.valid" type="submit" class="btn btn-success" translate>
            BTN.SAVE
        </button>
        <button routerLink="/profile" type="button" class="btn btn-dark" translate>
            BTN.BACK
        </button>
    </fieldset>
</form>
